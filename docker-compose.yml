version: '3.8'

services:
  coding-agent:
    build:
      context: .
      dockerfile: packages/coding-agent/Dockerfile
    ports:
      - '4096:4096'
    environment:
      - NODE_ENV=production
      - PORT=4096
      - GITHUB_REPO_URL=${GITHUB_REPO_URL:-}
    volumes:
      - ${CODE_PATH:-./.}:/home/workspace/repo:ro
    restart: unless-stopped
